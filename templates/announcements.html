{% extends "layout.html" %} {% block content %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/index.css') }}"
/>
<h2>Announcements</h2>

{% if role in ['teacher', 'admin','student'] %}
<form method="POST" style="margin-bottom: 20px">
  <textarea
    name="announcement"
    placeholder="Write an announcement..."
    required
    style="
      width: 100%;
      height: 100px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: none;
    "
  ></textarea>
  <br />
  <button type="submit" class="upload-btn">Post</button>
</form>
{% endif %}

<div>
  {% for announcement in announcements %}
  <div class="announcement">
    <p>{{ announcement["content"] }}</p>
    <p>
      <small
        >Posted by: {{ announcement["author"] }} on {{ announcement["date"]
        }}</small
      >
    </p>
    {% if announcement["author"] == username or role in ["teacher", "admin"] %}
    <form
      method="POST"
      action="{{ url_for('delete_announcement', ann_id=announcement['id']) }}"
    >
      <button type="submit" class="delete-btn">Delete</button>
    </form>

    {% endif %}
  </div>
  {% endfor %}
</div>
{% endblock %}
