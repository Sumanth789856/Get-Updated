{% extends "layout.html" %} {% block content %}
<h2>Announcements</h2>

{% if role == 'teacher' %}
<form method="POST" style="margin-bottom: 20px">
  <textarea
    name="announcement"
    placeholder="Write an announcement..."
    required
    style="
      width: 100%;
      height: 100px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: none;
    "
  ></textarea>
  <br />
  <button type="submit" class="upload-btn">Post</button>
</form>
{% endif %}

<div>
  {% for ann in announcements %}
  <div class="announcement">
    <p>{{ ann[1] }}</p>
    <small>By {{ ann[2] }} on {{ ann[3] }}</small>

    {% if role == 'teacher' %}
    <form
      method="POST"
      action="{{ url_for('delete_announcement', ann_id=ann[0]) }}"
      style="display: inline"
      onsubmit="return confirm('Are you sure you want to delete this announcement?');"
    >
      <button type="submit" class="delete-btn">Delete</button>
    </form>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% endblock %}
