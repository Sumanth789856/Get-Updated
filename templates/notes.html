{% extends "layout.html" %} {% block content %}
<h2>Notes</h2>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/index.css') }}"
/>
<!-- Upload Form -->
<form
  method="POST"
  enctype="multipart/form-data"
  style="
    background: #f9f9f9;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    width: 350px;
    margin: 20px auto;
    text-align: center;
    font-family: Arial, sans-serif;
  "
>
  <h3 style="margin-bottom: 15px; color: #333">Upload Your File</h3>

  <input
    type="file"
    name="file"
    required
    style="
      display: block;
      margin: 10px auto 20px auto;
      padding: 10px;
      border: 2px dashed #4caf50;
      border-radius: 8px;
      cursor: pointer;
      width: 90%;
      background: #fff;
    "
  />

  <button
    type="submit"
    style="
      background: linear-gradient(90deg, #4caf50, #45a049);
      border: none;
      color: white;
      padding: 12px 20px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    "
  >
    Upload File
  </button>
</form>

<!-- Notes List -->
<div class="cards">
  {% for note in files %}
  <div class="card">
    <!-- File download -->
    <a href="{{ url_for('uploaded_file', filename=note[1]) }}">
      <img src="https://img.icons8.com/color/48/file.png" />
      <h3>{{ note[1] }}</h3>
    </a>

    <!-- File type badge -->
    <span
      class="badge {% if note[1].endswith('.pdf') %}pdf {% elif note[1].endswith('.doc') or note[1].endswith('.docx') %}doc {% else %}txt {% endif %}"
    >
      {{ note[1].split('.')[-1].upper() }}
    </span>

    <!-- Uploader -->
    <p><small>Uploaded by: {{ note[2] }}</small></p>

    <!-- Delete button (only for teacher or uploader) -->
    {% if role == "teacher" or note[2] == session['username'] %}
    <form
      action="{{ url_for('delete_note', note_id=note[0]) }}"
      method="POST"
      style="display: inline"
    >
      <button type="submit" class="delete-btn">Delete</button>
    </form>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% endblock %}
